프로세스 간의 통신은 중요하다. 뭐 물론 혼자 쓰이는 프로세스도 있긴 하다.

통신을 할 때, 누가 먼저 할지? 작업이 언제 끝나는지 서로 알려 주어야만 한다. 이를 `동기화`라 한다.

하나의 동일한 데이터를 가지고, 여러 프로세스가 사용할 땐 서로 침범하면 안 되는 공간이 있다. 이를 `임계구역`이라 한다.

동기화와 임계구역에 대해서 알아보자~

프로세스 통신 분류가 있다.

- 양방향 통신
  - 데이터를 동시에 양쪽 방향으로 전송할 수 있는 구조이다.
  - 일반적인 통신은 양방향 통신이다. (소켓)
- 반양방향 통신
  - 데이터를 양쪽 방향으로 모두 다 전송할 수 있으나, 동시에는 불가능하다.
  - 예시로 무전기가 있다.
- 단방향 통신
  - 한 쪽 방향에서만 데이터를 전송할 수 있다.
  - 파이프라인, 전역변수 등이 있다.

---

공유 자원은 여러 프로세스가 공동으로 이용하는 변수, 메모리, 파일 등을 말한다.

공유 자원은 공동으로 이용되기 때문에 누가 언제 데이터를 읽거나 쓰느냐에 따라 그 결과가 달라질 수 있다.

예를 들어, P1, P2가 있고 공유 자원으로 10만원이 있다고 가정하자.

P1이 먼저 이를 읽어 5만원을 입금하고 저장하기 이전에 P2가 이를 읽어와서 10만원을 입금하려 한다.

총 금액은 당연히 25만원이 되어야 하지만, P2가 더 늦게 입금하여 20만원으로 저장된 상황이다.

이는 두 프로세스가 공유 자원인 전역 변수를 이용하여 작업를 해서 나온 예제이다.

이처럼 2개 이상의 프로세스가 공유 자원을 병행적으로 읽거나 쓰는 상황을 `Race-Condition`이라 한다.

공유 자원 접근 순서에 따라 실행 결과가 달라지는 프로그램의 영역을 `임계구역`이라 한다.
위의 상황에서 임계구역은, 금액을 읽고 입금을 한 후 금액을 저장하는 부분이 임계구역이다.

따라서 임계구역에서는 두 개 이상의 프로세스가 작업을 하면 안 된다. 어떤 프로세스가 임계구역에 들어간다면
다른 프로세스는 임계구역 밖에서 기다려야 하며, 임계구역의 프로세스가 나와야 들어갈 수 있다.

- 이러한 임계구역 문제를 해결할 수 있는 방법이 있을까?
  - 3가지 조건을 만족해야 해결할 수 있다.
    - 상호배제 (한 프로세스가 임계구역에 들어가면, 다른 프로세스는 들어올 수 없다.)
    - 한정대기 (대기자는 무한적으로 대기할 수 없다.)
      - 한정대기 조건을 보장하지 못하는 상황으로, `교착상태`가 있다. (ch6에서 학습)
    - 진행의 융통성 (한 프로세스가 다른 프로세스의 진행을 방해해선 안 된다.)



